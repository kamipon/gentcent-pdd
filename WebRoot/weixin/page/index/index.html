<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8"/>
	<!--声明文档兼容模式，表示使用IE浏览器的最新模式-->
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<!--设置视口的宽度(值为设备的理想宽度)，页面初始缩放值<理想宽度/可见宽度>-->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
	<title>首页</title>
	
	<!-- 引入Bootstrap核心样式文件 -->
	<link href="../../css/bootstrap.min.css" rel="stylesheet"/>
	<link href="index.css" rel="stylesheet"/>
	<style type="">
		html, body {
			overflow-x: hidden;
		}
		
		.top-img {
			height: 221px !important;
			width: 100%;
		}
	</style>
</head>

<body style="width: 100%;">
<div class="container-fluid" style="width: 100%;">
	<!-- 1.轮播图 -->
	<div class="row">
		<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
			<!-- 1.1三个点 -->
			<ol id="imgIndex" class="carousel-indicators">
<!--						<li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>-->
<!--						<li data-target="#carousel-example-generic" data-slide-to="1"></li>-->
<!--						<li data-target="#carousel-example-generic" data-slide-to="2"></li>-->
			</ol>
			<!-- 1.2轮播图图片 -->
			<div id="imgContent" class="carousel-inner" role="listbox" style="height: 221px;">
<!--						<div class="item active">-->
<!--							<img src="../../img/test1.jpg" alt="图片" class="top-img">-->
<!--							<div class="carousel-caption">-->
<!--							</div>-->
<!--						</div>-->
<!--						<div class="item ">-->
<!--							<img src="../../img/test2.jpg" alt="图片" class="top-img">-->
<!--							<div class="carousel-caption">-->
<!--							</div>-->
<!--						</div>-->
<!--						<div class="item ">-->
<!--							<img src="../../img/test3.jpg" alt="图片" class="top-img">-->
<!--							<div class="carousel-caption">-->
<!--							</div>-->
<!--						</div>-->
			</div>
			<!-- 1.3轮播图箭头 -->
			<a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
				<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
				<span class="sr-only">Previous</span>
			</a>
			<a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
				<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
				<span class="sr-only">Next</span>
			</a>
		</div>
	</div>
	
	<!-- 2.分类 -->
	<div class="row option">
		<div style="height: 10px;"></div>
		<div class="container" id="content">
			<div class="item3" onclick="location.href='../category/category.html'">
				<div class="item3-img"><img src="../../img/more.png" style="padding: 7px;width: 15.5vw;height: 15.5vw;"></div>
				<div class="item3-title">更多</div>
			</div>
		</div>
		
		<!-- 商品 -->
		<div style="height: 10px;"></div>
		<div class="row option">
			<!-- 标题 -->
			<div class="row" style="margin-top: 5px;">
				<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1">
					<svg class="iconOne" aria-hidden="true" style="margin-left: 5px;">
						<use xlink:href="#icon-tuijian"></use>
					</svg>
				</div>
				<div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">
					<span class="textzb">推荐商品</span>
				</div>
			</div>
			<!-- content -->
			<div style="height: 8px;"></div>
			<div class="goods-list" id="goods-list" style="padding: 0 4%;background-color: #f5f5f5;float: left;width: 100%;"></div>
		</div>
		
		
		<div style="height:60px;"></div>
		<!-- 底部导航栏 -->
		<div id="page"></div>
	</div>
	<!-- 引入jQuery核心js文件 -->
	<script src="../../js/jquery-1.11.3.min.js"></script>
	<!-- 引入BootStrap核心js文件 -->
	<script src="../../js/bootstrap.min.js"></script>
	<script src="../../js/iconfont.js"></script>
	<script src="../../js/iconfontx.js"></script>
	<script src="index.js"></script>
	<script type="text/javascript">

      $(function () {
          $.ajax({
              url: "/wx_wlindex",
              type: "get",
              data: {},
              dataType: "json",
              success: function (data) {
                  console.log(data);
                  //轮播图
									var lbimg = [];
                  for (var i = 0; i < data.imgList.length; i++) {
                      lbimg.push(data.imgList[i].value);
                  }
									
                  for (let i = 0; i < lbimg.length; i++) {
											var src = lbimg[i];
											if(i==0){
                          var html1="<li data-target=\"#carousel-example-generic\" data-slide-to=\""+i+"\" class=\"active\"></li>";
                          var html2="<div class=\"item active\">\n" +
																		"\t<img src=\""+src+"\" alt=\"图片\" class=\"top-img\">\n" +
																		"\t<div class=\"carousel-caption\">\n" +
																		"\t</div>\n" +
																		"</div>";
                      }else{
                          var html1="<li data-target=\"#carousel-example-generic\" data-slide-to=\""+i+"\"></li>";
                          var html2="<div class=\"item\">\n" +
                              "\t<img src=\""+src+"\" alt=\"图片\" class=\"top-img\">\n" +
                              "\t<div class=\"carousel-caption\">\n" +
                              "\t</div>\n" +
                              "</div>";
											}
											$("#imgIndex").append(html1);
											$("#imgContent").append(html2);
                  }
                  
                  
                  
                  //分类
                  var html = "";
                  for (let i = 0; i < data.clist.length; i++) {
                      if(i>2)
                          return;
                      const category = data.clist[i];
                      html +=
                          "<div class=\"item3\" onclick='location.href=\"../category/goodsList.html?cid=" + category.id + "\"'>" +
                          "<div class=\"item3-img\">" +
                          "<img src=\""+category.picurl+"\" style=\"width: 15.5vw;height: 15.5vw;padding: 7px;\">" +
                          "</div>" +
                          "<div class=\"item3-title\">" +
                          category.name +
                          "</div>" +
                          "</div>"
                  }
                  $("#content").prepend(html);


                  console.log(data.list);
                  //推荐商品
                  let ghtml = "";
                  for (let i = 0; i < data.list.length; i++) {
                      const goods = data.list[i].goods;
                      const goodsSpecs = data.list[i].specsList[0];
                      ghtml +=
                          "<div class=\"item-box\" onclick=\"location.href='../category/goodsDetail.html?id="+goods.id+"'\">" +
                          "<div class=\"item2\">" +
                          "<div>" +
                          "<img src=\""+JSON.parse(goods.imgList)[0]+"\" style=\"width: 100%;height: 48.7vw;\">" +
                          "</div>\n" +
                          "<div class=\"info\">" +
                          "<div class=\"title\">"+goods.title+"</div>" +
                          "<div class=\"subhead\">"+goods.subhead+"</div>" +
                          "<div class=\"price-sale\">" +
                          "<span class=\"price\">￥<smap id=\"price\">"+goodsSpecs.price+"</smap></span>" +
                          "<span class=\"sale\">库存<smap id=\"sale\">"+goodsSpecs.num+"</smap>件</span>" +
                          "</div>" +
                          "</div>" +
                          "</div>" +
                          "</div>"
                  }
                  $("#goods-list").html(ghtml);
              }
          });


          $("#page").load("../bottom.html", function () {
              $("#bottom-index > img").attr("src", "../../img/bottom-index-a.png");
              $("#bottom-index > div").css("color", "#32b531");
          });
      })
	
	
	</script>
</body>

</html>